# ==============================================================================
# Development Environment Configuration
# ==============================================================================
# This file contains pre-configured values for local development.
# You only need to provide: Telegram bot token, API keys, and proxy settings.

# ==============================================================================
# Timezone
# ==============================================================================

TZ=Europe/Moscow

# ==============================================================================
# Application Ports
# ==============================================================================

OUTSIDERS_STARTUP_PORT=10000
OUTSIDERS_SYSTEM_METRICS_PORT=9090
OUTSIDERS_APPLICATION_METRICS_PORT=9091


# ==============================================================================
# Persistence Layer
# ==============================================================================
# This section contains settings for the database and cache.

# --- PostgreSQL Configuration ---
# Documentation: https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING
POSTGRES_HOST=ximanager-postgres
POSTGRES_PORT=5432
POSTGRES_USER=ximanager
POSTGRES_PASSWORD=dev123
POSTGRES_DB=ximanager
POSTGRES_SSLMODE=disable
POSTGRES_TIMEZONE=Europe/Moscow

# --- Redis Configuration ---
# Documentation: https://redis.io/topics/config
REDIS_HOST=ximanager-redis
REDIS_PORT=6379
REDIS_PASSWORD=dev123
REDIS_DB=0
REDIS_MAX_RETRIES=5
REDIS_DIAL_TIMEOUT=5s

# ==============================================================================
# Telegram Bot
# ==============================================================================
# This section contains settings for the Telegram Bot API.

TELEGRAM_BOT_TOKEN=
TELEGRAM_DIPLOMAT_CHUNK_SIZE=4096
TELEGRAM_POLLER_TIMEOUT=120
TELEGRAM_POLLER_ALLOWED_UPDATES=message
TELEGRAM_POLLER_MAX_CONCURRENCY=5

# Custom Telegram Bot API endpoints (optional, for local test server)
# Leave empty to use official api.telegram.org
# Example for local server: http://localhost:8081/bot%s/%s
TELEGRAM_API_ENDPOINT=
TELEGRAM_FILE_API_ENDPOINT=

# ==============================================================================
# AI Providers & Models
# ==============================================================================
# This section contains API keys and model configurations for various AI services.

# --- API Keys ---
# You can get your API keys from the respective provider websites.
OPENROUTER_API_KEY=
OPENAI_API_KEY=

# --- Model Configuration ---
WHISPER_MODEL=whisper-1
SPENDINGS_LIMIT_EXCEEDED_MODEL=openai/gpt-4o-mini
SPENDINGS_LIMIT_EXCEEDED_FALLBACK_MODELS=deepseek/deepseek-chat

# ==============================================================================
# Application Logic
# ==============================================================================
# This section contains settings for core application logic.

# --- Context Timeout ---
# Default timeout for application contexts.
CONTEXT_TIMEOUT=5s

# --- Throttler ---
# Sets the time limit for request throttling.
REQUEST_THROTTLE_LIMIT=5s

# --- Pins ---
# Limits for pinned messages.
PINS_LIMIT_DEFAULT=3
PINS_LIMIT_DONATED=10
PINS_LIMIT_CHAT=16

# ==============================================================================
# AI Tiers Configuration
# ==============================================================================
# This section defines the configuration for different user tiers (Bronze, Silver, Gold).

# --- Spending Limits ($) ---
SPENDINGS_BRONZE_DAILY_LIMIT="2.0"
SPENDINGS_BRONZE_MONTHLY_LIMIT="7.0"
SPENDINGS_SILVER_DAILY_LIMIT="3.7"
SPENDINGS_SILVER_MONTHLY_LIMIT="15.0"
SPENDINGS_GOLD_DAILY_LIMIT="5.0"
SPENDINGS_GOLD_MONTHLY_LIMIT="26.0"

# --- Bronze Tier ---
BRONZE_VISION_PRIMARY_MODEL=openai/chatgpt-4o-latest
BRONZE_VISION_FALLBACK_MODELS=
BRONZE_CONTEXT_TTL_SECONDS=1800
BRONZE_CONTEXT_MAX_MESSAGES=25
BRONZE_CONTEXT_MAX_TOKENS=40000
BRONZE_USAGE_VISION_DAILY=3
BRONZE_USAGE_VISION_MONTHLY=20
BRONZE_USAGE_DIALER_DAILY=40
BRONZE_USAGE_DIALER_MONTHLY=300
BRONZE_USAGE_WHISPER_DAILY=15
BRONZE_USAGE_WHISPER_MONTHLY=70

# --- Silver Tier ---
SILVER_VISION_PRIMARY_MODEL="openai/gpt-4.1"
SILVER_VISION_FALLBACK_MODELS=
SILVER_CONTEXT_TTL_SECONDS=7200
SILVER_CONTEXT_MAX_MESSAGES=40
SILVER_CONTEXT_MAX_TOKENS=70000
SILVER_USAGE_VISION_DAILY=7
SILVER_USAGE_VISION_MONTHLY=35
SILVER_USAGE_DIALER_DAILY=150
SILVER_USAGE_DIALER_MONTHLY=600
SILVER_USAGE_WHISPER_DAILY=30
SILVER_USAGE_WHISPER_MONTHLY=170

# --- Gold Tier ---
GOLD_VISION_PRIMARY_MODEL="openai/o1"
GOLD_VISION_FALLBACK_MODELS=
GOLD_CONTEXT_TTL_SECONDS=21600
GOLD_CONTEXT_MAX_MESSAGES=60
GOLD_CONTEXT_MAX_TOKENS=160000
GOLD_USAGE_VISION_DAILY=20
GOLD_USAGE_VISION_MONTHLY=100
GOLD_USAGE_DIALER_DAILY=300
GOLD_USAGE_DIALER_MONTHLY=1500
GOLD_USAGE_WHISPER_DAILY=140
GOLD_USAGE_WHISPER_MONTHLY=300

# ==============================================================================
# Proxy Configuration
# ==============================================================================
# This section contains settings for the proxy server.

PROXY_ADDRESS=
PROXY_USER=
PROXY_PASS=

# ==============================================================================
# Feature Flags (Unleash)
# ==============================================================================
# Admin token for Unleash server initialization
# Format: *:*.unleash-admin-token-for-dev

UNLEASH_ADMIN_TOKEN=*:*.unleash-admin-token-dev
UNLEASH_API_URL=http://ximanager-unleash-dev:4242/api/
UNLEASH_APP_NAME=ximanager-dev
UNLEASH_INSTANCE_ID=dev-instance

# ==============================================================================
# Agent Configuration
# ==============================================================================
# REQUIRED: Provide your agent prompts (base64 encoded)

# Context Selection Agent Prompt (base64 encoded)
AGENT_CONTEXT_SELECTION_PROMPT=WW91IGFyZSBhIGNvbnRleHQgc2VsZWN0aW9uIGFnZW50LiBZb3VyIHRhc2sgaXMgdG8gYW5hbHl6ZSBhIGNvbnZlcnNhdGlvbiBoaXN0b3J5IGFuZCBzZWxlY3Qgd2hpY2ggbWVzc2FnZXMgYXJlIHJlbGV2YW50IGZvciBhbnN3ZXJpbmcgdGhlIG5ldyB1c2VyIHF1ZXN0aW9uLg0KDQpDb252ZXJzYXRpb24gaGlzdG9yeToNCiVzDQoNCk5ldyB1c2VyIHF1ZXN0aW9uOg0KJXMNCg0KR29hbDoNClNlbGVjdCBhbGwgbWVzc2FnZXMgdGhhdCBoZWxwIHRoZSBtb2RlbCBjb3JyZWN0bHkgdW5kZXJzdGFuZCBhbmQgcmVzcG9uZCB0byB0aGUgbmV3IG1lc3NhZ2Ug4oCUIGluY2x1ZGluZyBpbXBsaWVkIG9yIGluZGlyZWN0IGNvbnRleHQuDQoNCkV2YWx1YXRlIHJlbGV2YW5jZSB1c2luZyB0aGVzZSBydWxlcyAoaW4gb3JkZXIgb2YgaW1wb3J0YW5jZSk6DQoNCjEuICoqRGlyZWN0IHJlZmVyZW5jZSoqIOKAlCBJZiB0aGUgbmV3IG1lc3NhZ2UgcmVmZXJzIHRvLCBxdW90ZXMsIG9yIGJ1aWxkcyB1cG9uIGVhcmxpZXIgY29udGVudCAoZXZlbiBpbmRpcmVjdGx5KSwgaW5jbHVkZSB0aGF0IHBhcnQgZnVsbHkuDQoyLiAqKkxvZ2ljYWwgYW5kIGNvbnZlcnNhdGlvbmFsIGZsb3cqKiDigJQgSWYgc2V2ZXJhbCBtZXNzYWdlcyBmb3JtIGEgY29udGludW91cyBjb252ZXJzYXRpb24gKGV2ZW4gd2l0aCBzbGlnaHQgdG9waWMgZHJpZnQpLCBpbmNsdWRlIHRoZSB3aG9sZSBjaGFpbiB1bnRpbCB0aGUgdG9waWMgY2xlYXJseSBjaGFuZ2VzLg0KMy4gKipTZW1hbnRpYyByZWxhdGlvbioqIOKAlCBJbmNsdWRlIG1lc3NhZ2VzIHRoYXQgYXJlIGNvbmNlcHR1YWxseSBvciBlbW90aW9uYWxseSByZWxhdGVkLCBldmVuIGlmIHRoZXkgdXNlIGRpZmZlcmVudCB3b3JkcyBvciB0b3BpY3MuICANCiAgICpFeGFtcGxlOiDigJzQkCDQutCw0LrQuNC1INCy0L7Qv9GA0L7RgdGLP+KAnSDihpIgcHJldmlvdXMgUSZBIGNvbnRleHQuKg0KNC4gKipSZWNlbmN5IGFuZCB0b25lKiog4oCUIFByZWZlciB0aGUgbW9zdCByZWNlbnQgbWVzc2FnZXMsIGVzcGVjaWFsbHkgdGhvc2UgZXN0YWJsaXNoaW5nIHRvbmUsIHBlcnNvbmFsaXR5LCBvciBjdXJyZW50IHRvcGljIGZvY3VzLg0KNS4gKipDb250aW51aXR5IGJpYXMqKiDigJQgV2hlbiB1bmNlcnRhaW4sICoqZXJyIG9uIHRoZSBzaWRlIG9mIGluY2x1ZGluZyBtb3JlIGNvbnRleHQqKiwgZXNwZWNpYWxseSByZWNlbnQgcmVsZXZhbnQgbWVzc2FnZXMuDQoNCkFkZGl0aW9uYWwgZ3VpZGFuY2U6DQotIFNtYWxsIHRhbGssIGFja25vd2xlZGdtZW50cywgb3Ig4oCcdGhhbmsgeW914oCdIG1lc3NhZ2VzIGNhbiBzdGlsbCBjYXJyeSBjb250ZXh0IOKAlCBpbmNsdWRlIHRoZW0gaWYgdGhleSBoZWxwIHByZXNlcnZlIGZsb3cuDQotIElmIHRoZSB1c2VyIGFza3MgbWV0YS1xdWVzdGlvbnMgKOKAnNGH0YLQviDQvNGLINC+0LHRgdGD0LbQtNCw0LvQuD/igJ0sIOKAnNCwINGC0Ysg0L/QvtC80L3QuNGI0Yw/4oCdKSwgaW5jbHVkZSAqYWxsIHJlbGV2YW50IHByaW9yIHRvcGljcyogdGhhdCBjb3VsZCBtYXRjaCB0aGUgcmVmZXJlbmNlLg0KLSBJZiB0aGUgY29udmVyc2F0aW9uIGlzIGxvbmcgYW5kIG11bHRpLXRvcGljLCBzZWxlY3QgdGhlIGxhc3QgY29oZXJlbnQgc2VnbWVudCAoZS5nLiB0aGUgbGFzdCB0b3BpYyB0aGF0IGxhc3RlZCBzZXZlcmFsIHR1cm5zKS4NCg0KSWYgdGhlIG5ldyBtZXNzYWdlIGlzIGNsZWFybHkgdW5yZWxhdGVkIHRvIGFsbCBwcmV2aW91cyB0b3BpY3MsIHlvdSBtYXkgcmV0dXJuIGFuIGVtcHR5IGxpc3QuDQoNCvCfkqEgVGlwOiBZb3UgY2FuIHNlbGVjdCAqKnJhbmdlcyoqIHRvIGtlZXAgdGhlIG91dHB1dCBjb21wYWN0IHdoZW4gbWVzc2FnZXMgYXJlIGNvbnNlY3V0aXZlLg0KRXhhbXBsZXM6DQotIFNpbmdsZSBtZXNzYWdlczogIjUiLCAiMTIiDQotIFJhbmdlczogIjMtNyIgKGluY2x1ZGVzIDMsNCw1LDYsNykNCi0gTWl4ZWQ6IFsiMCIsICIzLTciLCAiMTIiLCAiMTUtMjAiXQ0KDQpSZXR1cm4gKipvbmx5KiogSlNPTiBpbiB0aGlzIGV4YWN0IGZvcm1hdDoNCnsNCiAgInJlbGV2YW50X2luZGljZXMiOiBbIjAiLCAiMy03IiwgIjEyIl0NCn0=

# Model Selection Agent Prompt  
AGENT_MODEL_SELECTION_PROMPT=WW91IGFyZSBhIG1vZGVsIHNlbGVjdGlvbiBhZ2VudC4gWW91ciBqb2IgaXMgdG8gYW5hbHl6ZSBhIHVzZXIgdGFzayBhbmQgcmVjb21tZW5kIHRoZSBtb3N0IGVmZmljaWVudCBBSSBtb2RlbCBhbmQgcmVhc29uaW5nIGVmZm9ydCDigJQgYmFsYW5jaW5nIHF1YWxpdHksIHNwZWVkLCBhbmQgY29zdC4KCkF2YWlsYWJsZSBtb2RlbHMgZm9yIHRoaXMgdGllciAoZnJvbSBNT1NUIHRvIExFQVNUIGNhcGFibGUpLCB3aXRoIEFBSSBzY29yZSAoMOKAkzEwMCksIHByaWNlIHBlciAxTSB0b2tlbnMsIGFuZCBjb250ZXh0IHdpbmRvdzoKCiVzCgpEZWZhdWx0IHJlYXNvbmluZyBlZmZvcnQgZm9yIHRoaXMgdGllcjogIiVzIgpUaWVyIGRlc2NyaXB0aW9uOiAiJXMiCgolcwoKQ29yZSBydWxlczoKLSBTdGFydCBmcm9tIHRoZSAqKnRvcCBtb2RlbCoqLCB0aGVuICoqc3RlcCBkb3duKiogdG8gY2hlYXBlci9mYXN0ZXIgb25lcyBpZiB0aGUgdGFzayBpcyBzaW1wbGUsIHNob3J0LCBvciByb3V0aW5lLgotIFN0YXkgd2l0aGluIHRoZSB1c2VyJ3MgdGllciB3aGVuZXZlciBwb3NzaWJsZSDigJQgdGhleSBwYWlkIGZvciBpdHMgcXVhbGl0eS4KLSBDaG9vc2UgdGhlICoqc21hbGxlc3QgY2FwYWJsZSBtb2RlbCoqIHRoYXQgY2FuIHJlbGlhYmx5IGNvbXBsZXRlIHRoZSB0YXNrLgotIEF2b2lkIHVzaW5nIHRvcC10aWVyICsgaGlnaCByZWFzb25pbmcgZm9yIHRyaXZpYWwgb3IgY29udmVyc2F0aW9uYWwgdHVybnMuCi0gSWYgdW5zdXJlLCBwaWNrICoqbWVkaXVtIHJlYXNvbmluZyoqLCBub3QgaGlnaC4KCldoZW4gdG8gZG93bmdyYWRlOgotIFRhc2sgaXMgc2hvcnQgb3IgZmFjdHVhbCAo4omkIDYgc2VudGVuY2VzKSAgCi0gQ29kZSBlZGl0IGlzIHNtYWxsL2xvY2FsICAKLSBTaW1wbGUgbWF0aCwgcmVwaHJhc2UsIG9yIG9idmlvdXMgY29udGludWF0aW9uICAKLSBMaWdodCBjb252ZXJzYXRpb24gb3IgYmFudGVyIHdpdGggWGkgTWFuYWdlciAgCi0gTm8gaGlnaC1zdGFrZXMgYWNjdXJhY3kgKGUuZy4gbGVnYWwvZmluYW5jZS9tZWRpY2FsKQoKV2hlbiB0byBzdGF5IGhpZ2gtdGllcjoKLSBNdWx0aS1zdGVwIHJlYXNvbmluZywgbm92ZWwgY29kZSwgZGVlcCByZXNlYXJjaCAgCi0gVXNlciByZXF1ZXN0cyAiZGV0YWlsZWQiLCAiaW4tZGVwdGgiLCAidGhvcm91Z2giICAKLSBIaWdoLXJpc2sgb3IgaGlnaC1pbXBvcnRhbmNlIHRhc2tzCgpTcGVjaWFsIGNhc2VzOgotICJRdWljayIvImZhc3QiIOKGkiBwcmlvcml0aXplIHNwZWVkICsgbG93IHJlYXNvbmluZyAgCi0gIkRldGFpbGVkIi8idGhvcm91Z2giIOKGkiBwcmlvcml0aXplIHF1YWxpdHkgKyBoaWdoZXIgcmVhc29uaW5nICAKLSBUcm9sbGluZy90ZXN0aW5nL25vbnNlbnNlIOKGkiB1c2UgdHJvbGxpbmcgbW9kZWxzICglcykKClRlbXBlcmF0dXJlIHNlbGVjdGlvbjoKLSBDcmVhdGl2ZSB0YXNrcyAoc3RvcmllcywgYnJhaW5zdG9ybWluZywgY2FzdWFsIGNoYXQpOiAwLjgtMS4yCi0gQmFsYW5jZWQgdGFza3MgKGV4cGxhbmF0aW9ucywgZGlzY3Vzc2lvbnMpOiAwLjctMS4wCi0gUHJlY2lzZSB0YXNrcyAoY29kZSwgbWF0aCwgZmFjdHMsIHRyYW5zbGF0aW9uKTogMC4zLTAuNwotIElmIHVuY2VydGFpbiwgdXNlIDEuMCBhcyBkZWZhdWx0CgpIZXVyaXN0aWM6CkFzayB5b3Vyc2VsZjogIldvdWxkIGFuIGF2ZXJhZ2UgY29tcGV0ZW50IG1vZGVsIHNvbHZlIHRoaXMgY29ycmVjdGx5IGluIG9uZSBwYXNzPyIgIArihpIgSWYgeWVzLCBkb3duZ3JhZGUgKyBsb3cvbWVkaXVtIHJlYXNvbmluZy4KClJlY2VudCBjb252ZXJzYXRpb24gY29udGV4dDoKIiIiCiVzCiIiIgoKTmV3IHVzZXIgdGFzazoKIiIiCiVzCiIiIgoKUmV0dXJuIG9ubHkgSlNPTiBpbiB0aGlzIGZvcm1hdDoKewogICJyZWNvbW1lbmRlZF9tb2RlbCI6ICJleGFjdCBtb2RlbCBuYW1lIGZyb20gYXZhaWxhYmxlIGxpc3QiLAogICJyZWFzb25pbmdfZWZmb3J0IjogImxvdy9tZWRpdW0vaGlnaCIsCiAgInRhc2tfY29tcGxleGl0eSI6ICJsb3cvbWVkaXVtL2hpZ2giLAogICJyZXF1aXJlc19zcGVlZCI6IHRydWUvZmFsc2UsCiAgInJlcXVpcmVzX3F1YWxpdHkiOiB0cnVlL2ZhbHNlLAogICJpc190cm9sbGluZyI6IHRydWUvZmFsc2UsCiAgInRlbXBlcmF0dXJlIjogMS4wCn0=

# Agent Configuration
AGENT_CONTEXT_MODEL=openai/gpt-4o-mini
AGENT_MODEL_SELECTION_MODEL=openai/gpt-4o-mini
AGENT_CONTEXT_TIMEOUT_SECONDS=45
AGENT_MODEL_TIMEOUT_SECONDS=30

# ==============================================================================
# Trolling Models Configuration
# ==============================================================================

TROLLING_MODELS=openai/gpt-4.1-mini,x-ai/grok-4-fast,x-ai/grok-4-fast:free

# Updated tier model configurations to match the new policies
# Models are listed from most capable to fastest/cheapest in JSON format
# Format: [{"name": "model/name", "aai": 0-100, "input_price_per_m": "$X", "output_price_per_m": "$Y", "ctx_tokens": "XYZk"}]
GOLD_DIALER_MODELS=[{"name":"openai/gpt-5","aai":68,"input_price_per_m":"$15","output_price_per_m":"$120","ctx_tokens":"400k"},{"name":"x-ai/grok-4","aai":65,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"256k"},{"name":"anthropic/claude-sonnet-4.5","aai":63,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"1M"},{"name":"google/gemini-2.5-pro","aai":60,"input_price_per_m":"$1.25","output_price_per_m":"$10","ctx_tokens":"1M"},{"name":"anthropic/claude-sonnet-4","aai":57,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"1M"}]
GOLD_DIALER_REASONING_EFFORT=high

SILVER_DIALER_MODELS=[{"name":"google/gemini-2.5-pro","aai":60,"input_price_per_m":"$1.25","output_price_per_m":"$10","ctx_tokens":"1M"},{"name":"anthropic/claude-3.7-sonnet:thinking","aai":50,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"200k"},{"name":"openai/gpt-4.1","aai":43,"input_price_per_m":"$2","output_price_per_m":"$8","ctx_tokens":"1M"}]
SILVER_DIALER_REASONING_EFFORT=medium

BRONZE_DIALER_MODELS=[{"name":"openai/gpt-4.1","aai":43,"input_price_per_m":"$2","output_price_per_m":"$8","ctx_tokens":"1M"},{"name":"anthropic/claude-3.7-sonnet","aai":34,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"200k"},{"name":"google/gemini-2.5-flash","aai":33,"input_price_per_m":"$0.30","output_price_per_m":"$2.50","ctx_tokens":"1M"},{"name":"anthropic/claude-3.5-sonnet","aai":30,"input_price_per_m":"$3","output_price_per_m":"$15","ctx_tokens":"200k"}]
BRONZE_DIALER_REASONING_EFFORT=medium
